#include "structs.h"
#include <vector>

int board[5][5] = {
    {0,0,0,0,0},
    {0,0,0,0,0},
    {0,0,0,0,0},
    {0,0,0,0,0},
    {0,0,0,0,0}
};
int possible_moves[25] = {
    0,1,2,3,4,
    10,11,12,13,14,
    20,21,22,23,24,
    30,31,32,33,34,
    40,41,42,43,44
};

int INIT_PLAYER = 0;

extern const int X = 1;
extern const int O = -1;
extern const int NONE = 0;
extern const Pair INVALID = {-1, -1};

extern const int win[28][4][2] = { 
  { {0,0}, {0,1}, {0,2}, {0,3} },
  { {1,0}, {1,1}, {1,2}, {1,3} },
  { {2,0}, {2,1}, {2,2}, {2,3} },
  { {3,0}, {3,1}, {3,2}, {3,3} },
  { {4,0}, {4,1}, {4,2}, {4,3} },
  { {0,1}, {0,2}, {0,3}, {0,4} },
  { {1,1}, {1,2}, {1,3}, {1,4} },
  { {2,1}, {2,2}, {2,3}, {2,4} },
  { {3,1}, {3,2}, {3,3}, {3,4} },
  { {4,1}, {4,2}, {4,3}, {4,4} },
  { {0,0}, {1,0}, {2,0}, {3,0} },
  { {0,1}, {1,1}, {2,1}, {3,1} },
  { {0,2}, {1,2}, {2,2}, {3,2} },
  { {0,3}, {1,3}, {2,3}, {3,3} },
  { {0,4}, {1,4}, {2,4}, {3,4} },
  { {1,0}, {2,0}, {3,0}, {4,0} },
  { {1,1}, {2,1}, {3,1}, {4,1} },
  { {1,2}, {2,2}, {3,2}, {4,2} },
  { {1,3}, {2,3}, {3,3}, {4,3} },
  { {1,4}, {2,4}, {3,4}, {4,4} },
  { {0,1}, {1,2}, {2,3}, {3,4} },
  { {0,0}, {1,1}, {2,2}, {3,3} },
  { {1,1}, {2,2}, {3,3}, {4,4} },
  { {1,0}, {2,1}, {3,2}, {4,3} },
  { {0,3}, {1,2}, {2,1}, {3,0} },
  { {0,4}, {1,3}, {2,2}, {3,1} },
  { {1,3}, {2,2}, {3,1}, {4,0} },
  { {1,4}, {2,3}, {3,2}, {4,1} }
};

extern const int lose[48][3][2] = {
  { {0,0}, {0,1}, {0,2} }, { {0,1}, {0,2}, {0,3} }, { {0,2}, {0,3}, {0,4} }, 
  { {1,0}, {1,1}, {1,2} }, { {1,1}, {1,2}, {1,3} }, { {1,2}, {1,3}, {1,4} }, 
  { {2,0}, {2,1}, {2,2} }, { {2,1}, {2,2}, {2,3} }, { {2,2}, {2,3}, {2,4} }, 
  { {3,0}, {3,1}, {3,2} }, { {3,1}, {3,2}, {3,3} }, { {3,2}, {3,3}, {3,4} }, 
  { {4,0}, {4,1}, {4,2} }, { {4,1}, {4,2}, {4,3} }, { {4,2}, {4,3}, {4,4} }, 
  { {0,0}, {1,0}, {2,0} }, { {1,0}, {2,0}, {3,0} }, { {2,0}, {3,0}, {4,0} }, 
  { {0,1}, {1,1}, {2,1} }, { {1,1}, {2,1}, {3,1} }, { {2,1}, {3,1}, {4,1} }, 
  { {0,2}, {1,2}, {2,2} }, { {1,2}, {2,2}, {3,2} }, { {2,2}, {3,2}, {4,2} }, 
  { {0,3}, {1,3}, {2,3} }, { {1,3}, {2,3}, {3,3} }, { {2,3}, {3,3}, {4,3} }, 
  { {0,4}, {1,4}, {2,4} }, { {1,4}, {2,4}, {3,4} }, { {2,4}, {3,4}, {4,4} }, 
  { {0,2}, {1,3}, {2,4} }, { {0,1}, {1,2}, {2,3} }, { {1,2}, {2,3}, {3,4} }, 
  { {0,0}, {1,1}, {2,2} }, { {1,1}, {2,2}, {3,3} }, { {2,2}, {3,3}, {4,4} }, 
  { {1,0}, {2,1}, {3,2} }, { {2,1}, {3,2}, {4,3} }, { {2,0}, {3,1}, {4,2} }, 
  { {0,2}, {1,1}, {2,0} }, { {0,3}, {1,2}, {2,1} }, { {1,2}, {2,1}, {3,0} }, 
  { {0,4}, {1,3}, {2,2} }, { {1,3}, {2,2}, {3,1} }, { {2,2}, {3,1}, {4,0} }, 
  { {1,4}, {2,3}, {3,2} }, { {2,3}, {3,2}, {4,1} }, { {2,4}, {3,3}, {4,2} }
};

extern const std::vector<std::vector<Pair>> possibleWinAfterMove[45] = {
  {{{0, 0}, {0, 1}, {0, 2}, {0, 3}}, {{0, 0}, {1, 0}, {2, 0}, {3, 0}}, {{0, 0}, {1, 1}, {2, 2}, {3, 3}}},
  {{{0, 0}, {0, 1}, {0, 2}, {0, 3}}, {{0, 1}, {0, 2}, {0, 3}, {0, 4}}, {{0, 1}, {1, 1}, {2, 1}, {3, 1}}, {{0, 1}, {1, 2}, {2, 3}, {3, 4}}},
  {{{0, 0}, {0, 1}, {0, 2}, {0, 3}}, {{0, 1}, {0, 2}, {0, 3}, {0, 4}}, {{0, 2}, {1, 2}, {2, 2}, {3, 2}}},
  {{{0, 0}, {0, 1}, {0, 2}, {0, 3}}, {{0, 1}, {0, 2}, {0, 3}, {0, 4}}, {{0, 3}, {1, 3}, {2, 3}, {3, 3}}, {{0, 3}, {1, 2}, {2, 1}, {3, 0}}},
  {{{0, 1}, {0, 2}, {0, 3}, {0, 4}}, {{0, 4}, {1, 4}, {2, 4}, {3, 4}}, {{0, 4}, {1, 3}, {2, 2}, {3, 1}}},
  {},
  {},
  {},
  {},
  {},
  {{{1, 0}, {1, 1}, {1, 2}, {1, 3}}, {{0, 0}, {1, 0}, {2, 0}, {3, 0}}, {{1, 0}, {2, 0}, {3, 0}, {4, 0}}, {{1, 0}, {2, 1}, {3, 2}, {4, 3}}},
  {{{1, 0}, {1, 1}, {1, 2}, {1, 3}}, {{1, 1}, {1, 2}, {1, 3}, {1, 4}}, {{0, 1}, {1, 1}, {2, 1}, {3, 1}}, {{1, 1}, {2, 1}, {3, 1}, {4, 1}}, {{0, 0}, {1, 1}, {2, 2}, {3, 3}}, {{1, 1}, {2, 2}, {3, 3}, {4, 4}}},
  {{{1, 0}, {1, 1}, {1, 2}, {1, 3}}, {{1, 1}, {1, 2}, {1, 3}, {1, 4}}, {{0, 2}, {1, 2}, {2, 2}, {3, 2}}, {{1, 2}, {2, 2}, {3, 2}, {4, 2}}, {{0, 1}, {1, 2}, {2, 3}, {3, 4}}, {{0, 3}, {1, 2}, {2, 1}, {3, 0}}},
  {{{1, 0}, {1, 1}, {1, 2}, {1, 3}}, {{1, 1}, {1, 2}, {1, 3}, {1, 4}}, {{0, 3}, {1, 3}, {2, 3}, {3, 3}}, {{1, 3}, {2, 3}, {3, 3}, {4, 3}}, {{0, 4}, {1, 3}, {2, 2}, {3, 1}}, {{1, 3}, {2, 2}, {3, 1}, {4, 0}}},
  {{{1, 1}, {1, 2}, {1, 3}, {1, 4}}, {{0, 4}, {1, 4}, {2, 4}, {3, 4}}, {{1, 4}, {2, 4}, {3, 4}, {4, 4}}, {{1, 4}, {2, 3}, {3, 2}, {4, 1}}},
  {},
  {},
  {},
  {},
  {},
  {{{2, 0}, {2, 1}, {2, 2}, {2, 3}}, {{0, 0}, {1, 0}, {2, 0}, {3, 0}}, {{1, 0}, {2, 0}, {3, 0}, {4, 0}}},
  {{{2, 0}, {2, 1}, {2, 2}, {2, 3}}, {{2, 1}, {2, 2}, {2, 3}, {2, 4}}, {{0, 1}, {1, 1}, {2, 1}, {3, 1}}, {{1, 1}, {2, 1}, {3, 1}, {4, 1}}, {{1, 0}, {2, 1}, {3, 2}, {4, 3}}, {{0, 3}, {1, 2}, {2, 1}, {3, 0}}},
  {{{2, 0}, {2, 1}, {2, 2}, {2, 3}}, {{2, 1}, {2, 2}, {2, 3}, {2, 4}}, {{0, 2}, {1, 2}, {2, 2}, {3, 2}}, {{1, 2}, {2, 2}, {3, 2}, {4, 2}}, {{0, 0}, {1, 1}, {2, 2}, {3, 3}}, {{1, 1}, {2, 2}, {3, 3}, {4, 4}}, {{0, 4}, {1, 3}, {2, 2}, {3, 1}}, {{1, 3}, {2, 2}, {3, 1}, {4, 0}}},
  {{{2, 0}, {2, 1}, {2, 2}, {2, 3}}, {{2, 1}, {2, 2}, {2, 3}, {2, 4}}, {{0, 3}, {1, 3}, {2, 3}, {3, 3}}, {{1, 3}, {2, 3}, {3, 3}, {4, 3}}, {{0, 1}, {1, 2}, {2, 3}, {3, 4}}, {{1, 4}, {2, 3}, {3, 2}, {4, 1}}},
  {{{2, 1}, {2, 2}, {2, 3}, {2, 4}}, {{0, 4}, {1, 4}, {2, 4}, {3, 4}}, {{1, 4}, {2, 4}, {3, 4}, {4, 4}}},
  {},
  {},
  {},
  {},
  {},
  {{{3, 0}, {3, 1}, {3, 2}, {3, 3}}, {{0, 0}, {1, 0}, {2, 0}, {3, 0}}, {{1, 0}, {2, 0}, {3, 0}, {4, 0}}, {{0, 3}, {1, 2}, {2, 1}, {3, 0}}},
  {{{3, 0}, {3, 1}, {3, 2}, {3, 3}}, {{3, 1}, {3, 2}, {3, 3}, {3, 4}}, {{0, 1}, {1, 1}, {2, 1}, {3, 1}}, {{1, 1}, {2, 1}, {3, 1}, {4, 1}}, {{0, 4}, {1, 3}, {2, 2}, {3, 1}}, {{1, 3}, {2, 2}, {3, 1}, {4, 0}}},
  {{{3, 0}, {3, 1}, {3, 2}, {3, 3}}, {{3, 1}, {3, 2}, {3, 3}, {3, 4}}, {{0, 2}, {1, 2}, {2, 2}, {3, 2}}, {{1, 2}, {2, 2}, {3, 2}, {4, 2}}, {{1, 0}, {2, 1}, {3, 2}, {4, 3}}, {{1, 4}, {2, 3}, {3, 2}, {4, 1}}},
  {{{3, 0}, {3, 1}, {3, 2}, {3, 3}}, {{3, 1}, {3, 2}, {3, 3}, {3, 4}}, {{0, 3}, {1, 3}, {2, 3}, {3, 3}}, {{1, 3}, {2, 3}, {3, 3}, {4, 3}}, {{0, 0}, {1, 1}, {2, 2}, {3, 3}}, {{1, 1}, {2, 2}, {3, 3}, {4, 4}}},
  {{{3, 1}, {3, 2}, {3, 3}, {3, 4}}, {{0, 4}, {1, 4}, {2, 4}, {3, 4}}, {{1, 4}, {2, 4}, {3, 4}, {4, 4}}, {{0, 1}, {1, 2}, {2, 3}, {3, 4}}},
  {},
  {},
  {},
  {},
  {},
  {{{4, 0}, {4, 1}, {4, 2}, {4, 3}}, {{1, 0}, {2, 0}, {3, 0}, {4, 0}}, {{1, 3}, {2, 2}, {3, 1}, {4, 0}}},
  {{{4, 0}, {4, 1}, {4, 2}, {4, 3}}, {{4, 1}, {4, 2}, {4, 3}, {4, 4}}, {{1, 1}, {2, 1}, {3, 1}, {4, 1}}, {{1, 4}, {2, 3}, {3, 2}, {4, 1}}},
  {{{4, 0}, {4, 1}, {4, 2}, {4, 3}}, {{4, 1}, {4, 2}, {4, 3}, {4, 4}}, {{1, 2}, {2, 2}, {3, 2}, {4, 2}}},
  {{{4, 0}, {4, 1}, {4, 2}, {4, 3}}, {{4, 1}, {4, 2}, {4, 3}, {4, 4}}, {{1, 3}, {2, 3}, {3, 3}, {4, 3}}, {{1, 0}, {2, 1}, {3, 2}, {4, 3}}},
  {{{4, 1}, {4, 2}, {4, 3}, {4, 4}}, {{1, 4}, {2, 4}, {3, 4}, {4, 4}}, {{1, 1}, {2, 2}, {3, 3}, {4, 4}}}
};

extern const std::vector<std::vector<Pair>> possibleLoseAfterMove[45] = {
  {{{0, 0}, {0, 1}, {0, 2}}, {{0, 0}, {1, 0}, {2, 0}}, {{0, 0}, {1, 1}, {2, 2}}},
  {{{0, 0}, {0, 1}, {0, 2}}, {{0, 1}, {0, 2}, {0, 3}}, {{0, 1}, {1, 1}, {2, 1}}, {{0, 1}, {1, 2}, {2, 3}}},
  {{{0, 0}, {0, 1}, {0, 2}}, {{0, 1}, {0, 2}, {0, 3}}, {{0, 2}, {0, 3}, {0, 4}}, {{0, 2}, {1, 2}, {2, 2}}, {{0, 2}, {1, 3}, {2, 4}}, {{0, 2}, {1, 1}, {2, 0}}},
  {{{0, 1}, {0, 2}, {0, 3}}, {{0, 2}, {0, 3}, {0, 4}}, {{0, 3}, {1, 3}, {2, 3}}, {{0, 3}, {1, 2}, {2, 1}}},
  {{{0, 2}, {0, 3}, {0, 4}}, {{0, 4}, {1, 4}, {2, 4}}, {{0, 4}, {1, 3}, {2, 2}}},
  {},
  {},
  {},
  {},
  {},
  {{{1, 0}, {1, 1}, {1, 2}}, {{0, 0}, {1, 0}, {2, 0}}, {{1, 0}, {2, 0}, {3, 0}}, {{1, 0}, {2, 1}, {3, 2}}},
  {{{1, 0}, {1, 1}, {1, 2}}, {{1, 1}, {1, 2}, {1, 3}}, {{0, 1}, {1, 1}, {2, 1}}, {{1, 1}, {2, 1}, {3, 1}}, {{0, 0}, {1, 1}, {2, 2}}, {{1, 1}, {2, 2}, {3, 3}}, {{0, 2}, {1, 1}, {2, 0}}},
  {{{1, 0}, {1, 1}, {1, 2}}, {{1, 1}, {1, 2}, {1, 3}}, {{1, 2}, {1, 3}, {1, 4}}, {{0, 2}, {1, 2}, {2, 2}}, {{1, 2}, {2, 2}, {3, 2}}, {{0, 1}, {1, 2}, {2, 3}}, {{1, 2}, {2, 3}, {3, 4}}, {{0, 3}, {1, 2}, {2, 1}}, {{1, 2}, {2, 1}, {3, 0}}},
  {{{1, 1}, {1, 2}, {1, 3}}, {{1, 2}, {1, 3}, {1, 4}}, {{0, 3}, {1, 3}, {2, 3}}, {{1, 3}, {2, 3}, {3, 3}}, {{0, 2}, {1, 3}, {2, 4}}, {{0, 4}, {1, 3}, {2, 2}}, {{1, 3}, {2, 2}, {3, 1}}},
  {{{1, 2}, {1, 3}, {1, 4}}, {{0, 4}, {1, 4}, {2, 4}}, {{1, 4}, {2, 4}, {3, 4}}, {{1, 4}, {2, 3}, {3, 2}}},
  {},
  {},
  {},
  {},
  {},
  {{{2, 0}, {2, 1}, {2, 2}}, {{0, 0}, {1, 0}, {2, 0}}, {{1, 0}, {2, 0}, {3, 0}}, {{2, 0}, {3, 0}, {4, 0}}, {{2, 0}, {3, 1}, {4, 2}}, {{0, 2}, {1, 1}, {2, 0}}},
  {{{2, 0}, {2, 1}, {2, 2}}, {{2, 1}, {2, 2}, {2, 3}}, {{0, 1}, {1, 1}, {2, 1}}, {{1, 1}, {2, 1}, {3, 1}}, {{2, 1}, {3, 1}, {4, 1}}, {{1, 0}, {2, 1}, {3, 2}}, {{2, 1}, {3, 2}, {4, 3}}, {{0, 3}, {1, 2}, {2, 1}}, {{1, 2}, {2, 1}, {3, 0}}},
  {{{2, 0}, {2, 1}, {2, 2}}, {{2, 1}, {2, 2}, {2, 3}}, {{2, 2}, {2, 3}, {2, 4}}, {{0, 2}, {1, 2}, {2, 2}}, {{1, 2}, {2, 2}, {3, 2}}, {{2, 2}, {3, 2}, {4, 2}}, {{0, 0}, {1, 1}, {2, 2}}, {{1, 1}, {2, 2}, {3, 3}}, {{2, 2}, {3, 3}, {4, 4}}, {{0, 4}, {1, 3}, {2, 2}}, {{1, 3}, {2, 2}, {3, 1}}, {{2, 2}, {3, 1}, {4, 0}}},
  {{{2, 1}, {2, 2}, {2, 3}}, {{2, 2}, {2, 3}, {2, 4}}, {{0, 3}, {1, 3}, {2, 3}}, {{1, 3}, {2, 3}, {3, 3}}, {{2, 3}, {3, 3}, {4, 3}}, {{0, 1}, {1, 2}, {2, 3}}, {{1, 2}, {2, 3}, {3, 4}}, {{1, 4}, {2, 3}, {3, 2}}, {{2, 3}, {3, 2}, {4, 1}}},
  {{{2, 2}, {2, 3}, {2, 4}}, {{0, 4}, {1, 4}, {2, 4}}, {{1, 4}, {2, 4}, {3, 4}}, {{2, 4}, {3, 4}, {4, 4}}, {{0, 2}, {1, 3}, {2, 4}}, {{2, 4}, {3, 3}, {4, 2}}},
  {},
  {},
  {},
  {},
  {},
  {{{3, 0}, {3, 1}, {3, 2}}, {{1, 0}, {2, 0}, {3, 0}}, {{2, 0}, {3, 0}, {4, 0}}, {{1, 2}, {2, 1}, {3, 0}}},
  {{{3, 0}, {3, 1}, {3, 2}}, {{3, 1}, {3, 2}, {3, 3}}, {{1, 1}, {2, 1}, {3, 1}}, {{2, 1}, {3, 1}, {4, 1}}, {{2, 0}, {3, 1}, {4, 2}}, {{1, 3}, {2, 2}, {3, 1}}, {{2, 2}, {3, 1}, {4, 0}}},
  {{{3, 0}, {3, 1}, {3, 2}}, {{3, 1}, {3, 2}, {3, 3}}, {{3, 2}, {3, 3}, {3, 4}}, {{1, 2}, {2, 2}, {3, 2}}, {{2, 2}, {3, 2}, {4, 2}}, {{1, 0}, {2, 1}, {3, 2}}, {{2, 1}, {3, 2}, {4, 3}}, {{1, 4}, {2, 3}, {3, 2}}, {{2, 3}, {3, 2}, {4, 1}}},
  {{{3, 1}, {3, 2}, {3, 3}}, {{3, 2}, {3, 3}, {3, 4}}, {{1, 3}, {2, 3}, {3, 3}}, {{2, 3}, {3, 3}, {4, 3}}, {{1, 1}, {2, 2}, {3, 3}}, {{2, 2}, {3, 3}, {4, 4}}, {{2, 4}, {3, 3}, {4, 2}}},
  {{{3, 2}, {3, 3}, {3, 4}}, {{1, 4}, {2, 4}, {3, 4}}, {{2, 4}, {3, 4}, {4, 4}}, {{1, 2}, {2, 3}, {3, 4}}},
  {},
  {},
  {},
  {},
  {},
  {{{4, 0}, {4, 1}, {4, 2}}, {{2, 0}, {3, 0}, {4, 0}}, {{2, 2}, {3, 1}, {4, 0}}},
  {{{4, 0}, {4, 1}, {4, 2}}, {{4, 1}, {4, 2}, {4, 3}}, {{2, 1}, {3, 1}, {4, 1}}, {{2, 3}, {3, 2}, {4, 1}}},
  {{{4, 0}, {4, 1}, {4, 2}}, {{4, 1}, {4, 2}, {4, 3}}, {{4, 2}, {4, 3}, {4, 4}}, {{2, 2}, {3, 2}, {4, 2}}, {{2, 0}, {3, 1}, {4, 2}}, {{2, 4}, {3, 3}, {4, 2}}},
  {{{4, 1}, {4, 2}, {4, 3}}, {{4, 2}, {4, 3}, {4, 4}}, {{2, 3}, {3, 3}, {4, 3}}, {{2, 1}, {3, 2}, {4, 3}}},
  {{{4, 2}, {4, 3}, {4, 4}}, {{2, 4}, {3, 4}, {4, 4}}, {{2, 2}, {3, 3}, {4, 4}}}
};